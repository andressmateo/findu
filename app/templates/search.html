<!DOCTYPE html>
<html ng-app="ui.bootstrap.demo">
<head lang="es">
    <meta charset="UTF-8">
    <title>Buscar</title>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.16/angular.js"></script>
    <script src="//angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.12.0.js"></script>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

    <script>
        angular.module('ui.bootstrap.demo', ['ui.bootstrap']);
        angular.module('ui.bootstrap.demo').controller('TypeaheadCtrl', function($scope, $http) {

  $scope.getLocation = function(val) {
    return $http.get('/buscar_json', {
      params: {
        method : 'GET',
        name: val,
      }
    }).then(function(response){
    return response.data.names.map(function(item){
        return item.name;
      });
    });
  };
  });
    </script>

</head>
<body>
    <div class="container-fluid" ng-controller="TypeaheadCtrl">
        <div class="row">
            <div class="col-md-6 col-md-offset-3" style="margin-top:15%">
                <i class="fa fa-5x">PROJECT ATHENE</i><br/><br/>
                <form action="/buscar" method="post">
                    <input ng-model="asyncSelected" class="form-control" type="text" name="busqueda" placeholder="¿Qué quieres buscar?" typeahead="address for address in getLocation($viewValue)" typeahead-loading="loadingLocations"/>
                    <i ng-show="loadingLocations" class="glyphicon glyphicon-refresh"></i>
                    <br/>
                    <input class="btn btn-primary center-block" type="submit" value="Buscar"/>
                </form>
            </div>
        </div>
    </div>
</div>
</body>
</html>